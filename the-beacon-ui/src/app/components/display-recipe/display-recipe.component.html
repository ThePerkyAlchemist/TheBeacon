

<h2>Recipes</h2>


<!-- Create New Recipe -->
<div *ngIf="!editingRecipe">
  <h3>Add New Recipe</h3>
  <form (ngSubmit)="createRecipe()">
    <input [(ngModel)]="newRecipe.recipeId" name="recipeId" placeholder="Recipe Group ID" required>
    <input [(ngModel)]="newRecipe.name" name="name" placeholder="Name" required>
    <input [(ngModel)]="newRecipe.liquidId" name="liquidId" placeholder="Liquid Ingredient ID" required>
    <input [(ngModel)]="newRecipe.liquidIngredientVolumeMl" name="volume" placeholder="Volume (ml)" required>
    <button type="submit">Create Recipe Entry</button>
  </form>
</div>

<!-- Edit Existing Recipe -->
<div *ngIf="editingRecipe">
  <h3>Edit Recipe</h3>
  <form (ngSubmit)="saveRecipe()">
    <input [(ngModel)]="editingRecipe.recipeId" name="editRecipeId" placeholder="Recipe Group ID" required>
    <input [(ngModel)]="editingRecipe.name" name="editName" placeholder="Name" required>
    <input [(ngModel)]="editingRecipe.liquidId" name="editLiquidId" placeholder="Liquid Ingredient ID" required>
    <input [(ngModel)]="editingRecipe.liquidIngredientVolumeMl" name="editVolume" placeholder="Volume (ml)" required>
    <button type="submit">Save Changes</button>
    <button type="button" (click)="cancelEdit()">Cancel</button>
  </form>
</div>

<!-- List Recipes -->
<div>
  <h3>Recipe List</h3>

    <!-- Table -->
  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">

    <ng-container matColumnDef="recipeId">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Recipe Group ID </th>
      <td mat-cell *matCellDef="let recipe"> {{recipe.recipeId}} </td>
    </ng-container>
  
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
      <td mat-cell *matCellDef="let recipe"> {{recipe.name}} </td>
    </ng-container>
  
    <ng-container matColumnDef="liquidId">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Liquid Ingredient ID </th>
      <td mat-cell *matCellDef="let recipe"> {{recipe.liquidId}} </td>
    </ng-container>
  
    <ng-container matColumnDef="volume">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Volume (ml) </th>
      <td mat-cell *matCellDef="let recipe"> {{recipe.liquidIngredientVolumeMl}} </td>
    </ng-container>
  
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> Actions </th>
      <td mat-cell *matCellDef="let recipe">
        <button mat-raised-button color="primary" (click)="startEditing(recipe)">Edit</button>
        <button mat-raised-button color="warn" (click)="deleteRecipe(recipe.id)">Delete</button>
      </td>
    </ng-container>
  
    <!-- Header and Row Declarations -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  
  </table>
</div>


<!--
<h2>Recipes</h2>

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Recipe ID</th>
      <th>Recipe</th>
      <th>Ingredient</th>
      <th>Volume (ml)</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let recipe of groupedRecipes">
      <tr>
        <td [attr.rowspan]="recipe.ingredients.length">
          {{ recipe.id }}
        </td>
        <td [attr.rowspan]="recipe.ingredients.length">
          {{ recipe.name }}
          <div>
            <button (click)="deleteRecipe(recipe.id)">Delete</button>
          </div>
        </td>
        <td>{{ recipe.ingredients[0].liquidName }}</td>
        <td>{{ recipe.ingredients[0].liquidIngredientVolumeMl }}</td>
      </tr>
      <tr *ngFor="let ingredient of recipe.ingredients.slice(1)">
        <td>{{ ingredient.liquidName }}</td>
        <td>{{ ingredient.liquidIngredientVolumeMl }}</td>
      </tr>
    </ng-container>
  </tbody>
</table>
-->