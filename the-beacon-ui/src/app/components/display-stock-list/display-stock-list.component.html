<!-- Container with logo and heading -->
<div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
  <img src="assets/theBeaconLogo4K.png" alt="The Beacon Logo" style="height: 60px;" />
  <h2>Stock</h2>
</div>

<!-- Success message -->
<div *ngIf="successMessage" style="color: green; margin-bottom: 1rem;">
  {{ successMessage }}
</div>

<!-- Material Table -->
<table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" style="width: 100%;">

  <!-- Name Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
    <td mat-cell *matCellDef="let stock"> {{stock.name}} </td>
  </ng-container>

  <!-- Category Column -->
  <ng-container matColumnDef="category">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Category </th>
    <td mat-cell *matCellDef="let stock"> {{stock.category}} </td>
  </ng-container>

  <!-- Subcategory Column -->
  <ng-container matColumnDef="subcategory">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Subcategory </th>
    <td mat-cell *matCellDef="let stock"> {{stock.subcategory}} </td>
  </ng-container>

  <!-- Volume Column -->
  <ng-container matColumnDef="volumePerUnit">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Volume </th>
    <td mat-cell *matCellDef="let stock"> {{stock.volumePerUnit}} </td>
  </ng-container>

  <!-- Units Column -->
  <ng-container matColumnDef="numberOfUnits">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Units </th>
    <td mat-cell *matCellDef="let stock"> {{stock.numberOfUnits}} </td>
  </ng-container>

  <!-- Status Column -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
    <td mat-cell *matCellDef="let stock"> {{stock.status}} </td>
  </ng-container>

  <!-- Barcode Column -->
  <ng-container matColumnDef="barcodeString">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Barcode </th>
    <td mat-cell *matCellDef="let stock"> {{stock.barcodeString}} </td>
  </ng-container>

  <!-- Expiry Column -->
  <ng-container matColumnDef="dateOfExpiry">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Expiry </th>
    <td mat-cell *matCellDef="let stock"> {{stock.dateOfExpiry | date}} </td>
  </ng-container>

  <!-- Actions Column -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef> Actions </th>
    <td mat-cell *matCellDef="let stock">
      <button mat-raised-button color="primary" (click)="editStock(stock)">Edit</button>
      <button mat-raised-button color="warn" *ngIf="stock.id !== undefined" (click)="deleteStock(stock.id)">Delete</button>
    </td>
  </ng-container>

  <!-- Table headers and rows -->
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<!-- Paginator -->
<mat-paginator
  [length]="dataLength"
  [pageSize]="pageSize"
  [pageSizeOptions]="[5, 10, 25, 100]"
  showFirstLastButtons
  aria-label="Select page">
</mat-paginator>

<!-- Add New Stock Item -->
<button (click)="addStock()" style="margin-top: 20px;">Add New Stock Item</button>

<!-- Edit Form -->
<div *ngIf="editingStock" style="margin-top: 1rem; padding: 1rem; border: 1px solid #ccc;">
  <h3>Edit Stock</h3>
  <form (ngSubmit)="saveEdit()" #editForm="ngForm">
    <label>Name:
      <input [(ngModel)]="editingStock.name" name="name" required #nameInput="ngModel" />
    </label>
    <div *ngIf="nameInput.invalid && nameInput.touched" style="color: red;">Name is required.</div>
    <br />

    <label>Category:
      <input [(ngModel)]="editingStock.category" name="category" required #categoryInput="ngModel" />
    </label>
    <div *ngIf="categoryInput.invalid && categoryInput.touched" style="color: red;">Category is required.</div>
    <br />

    <label>Subcategory:
      <input [(ngModel)]="editingStock.subcategory" name="subcategory" required #subcategoryInput="ngModel" />
    </label>
    <div *ngIf="subcategoryInput.invalid && subcategoryInput.touched" style="color: red;">Subcategory is required.</div>
    <br />

    <label>Volume Per Unit:
      <input type="number" [(ngModel)]="editingStock.volumePerUnit" name="volumePerUnit" required min="1" #volumeInput="ngModel" />
    </label>
    <div *ngIf="volumeInput.invalid && volumeInput.touched" style="color: red;">Volume must be*
